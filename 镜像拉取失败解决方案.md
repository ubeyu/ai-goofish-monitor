# 镜像拉取失败解决方案

## 问题分析

从错误信息可以看出，Docker在拉取镜像时遇到了问题：
```
Error response from daemon: Get "https://ghcr.io/v2/ubeyu/ai-goofish/manifests/sha256:275aa20...": ...
```

这通常是由以下原因之一导致的：

1. **网络连接问题**：无法连接到GHCR（GitHub Container Registry）
2. **权限问题**：没有访问私有镜像的权限
3. **Docker未安装或未运行**：本地环境中Docker不可用
4. **镜像标签不存在**：指定的镜像标签或SHA不存在

## 解决方案

### 方案1：检查Docker环境

1. **确认Docker已安装**：
   - Windows：安装Docker Desktop
   - macOS：安装Docker Desktop
   - Linux：通过包管理器安装Docker

2. **确认Docker正在运行**：
   ```bash
   docker --version
   docker info
   ```

### 方案2：网络问题解决

1. **检查网络连接**：
   ```bash
   ping ghcr.io
   curl -v https://ghcr.io
   ```

2. **配置Docker代理（如果需要）**：
   在Docker Desktop中配置HTTP/HTTPS代理，或在`/etc/docker/daemon.json`中添加：
   ```json
   {
     "proxies": {
       "default": {
         "httpProxy": "http://your-proxy:port",
         "httpsProxy": "https://your-proxy:port",
         "noProxy": "localhost,127.0.0.1"
       }
     }
   }
   ```

3. **更换镜像源**：
   可以使用国内镜像源，如阿里云、腾讯云等

### 方案3：权限问题解决

如果使用的是私有镜像，需要登录GHCR：
```bash
docker login ghcr.io
```

### 方案4：本地构建镜像（推荐）

如果无法拉取远程镜像，可以在本地构建：

1. **克隆代码仓库**：
   ```bash
git clone https://github.com/ubeyu/ai-goofish-monitor.git
cd ai-goofish-monitor
```

2. **构建镜像**：
   ```bash
docker build -t ai-goofish-monitor .
```

3. **使用本地镜像**：
   ```bash
docker run -d -p 8000:8000 --name ai-goofish-monitor ai-goofish-monitor
```

### 方案5：检查镜像标签

确认使用的镜像标签或SHA是否存在：
```bash
docker pull ubeyu/ai-goofish-monitor:latest
```

## 群晖容器特定解决方案

1. **更新Container Manager**：确保群晖Container Manager已更新到最新版本

2. **检查网络设置**：
   - 在群晖控制面板中检查网络设置
   - 确认DNS设置正确（可以使用8.8.8.8）

3. **使用本地构建**：
   - 在群晖上安装Git和Docker
   - 克隆代码并在本地构建镜像
   - 在Container Manager中使用本地镜像

4. **检查存储空间**：确保群晖有足够的存储空间来拉取和运行镜像

## 日志分析

如果问题仍然存在，可以查看Docker守护进程日志：

- Windows：Docker Desktop > 设置 > 故障排除 > 查看日志
- Linux：`journalctl -u docker`

## 联系支持

如果以上方案都无法解决问题，可以：

1. 检查GitHub仓库中的最新发布：https://github.com/ubeyu/ai-goofish-monitor/releases
2. 在GitHub Issues中报告问题：https://github.com/ubeyu/ai-goofish-monitor/issues
3. 检查项目文档：https://github.com/ubeyu/ai-goofish-monitor/blob/master/README.md